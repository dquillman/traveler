{% extends 'base.html' %}
{% block title %}Stay{% endblock %}
{% block content %}
<div class="container mx-auto px-4 py-6 max-w-3xl">
  <h1 class="text-2xl font-semibold mb-2">{{ stay.park }} {{ stay.site }}</h1>
  <p class="opacity-80 mb-4">{{ stay.city }}, {{ stay.state }}</p>
  {% if stay.photo %}
  <div class="mb-6">
    <img src="{{ stay.photo.url }}" alt="{{ stay.park|default:'photo' }}" style="max-width:100%; height:auto; border-radius:10px; border:1px solid var(--border);" />
  </div>
  {% endif %}
  <div class="grid grid-cols-2 gap-4 mb-6">
    <div><strong>Latitude:</strong> {{ stay.latitude }}</div>
    <div><strong>Longitude:</strong> {{ stay.longitude }}</div>
  </div>
  <div class="mb-6" title="Edit to change rating">
    <strong>Rating:</strong>
    {% if stay.rating %}
      <span class="inline-block align-middle" aria-label="Rating">
        {% for i in stars %}
          <span style="display:inline-block; padding:0 2px; color:{% if stay.rating and stay.rating >= i %}var(--accent){% else %}#bbb{% endif %};">&#9733;</span>
        {% endfor %}
      </span>
      <span class="opacity-70">({{ stay.rating }}/5)</span>
    {% else %}
      <span class="opacity-70">â€”</span>
    {% endif %}
  </div>
  <div class="card" style="margin: 16px 0; padding: 12px;">
    <h2 style="margin-top:0;">Details</h2>
    <table class="table">
      <tbody>
      {% for label, value in all_fields %}
        <tr>
          <th style="text-align:left; white-space:nowrap; width: 30%;">{{ label }}</th>
          <td>
            {% if label|lower == 'photo' and stay.photo %}
              <a href="{{ stay.photo.url }}" target="_blank" rel="noopener">{{ value }}</a>
            {% else %}
              {{ value }}
            {% endif %}
          </td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
  </div>
  <div class="flex gap-4">
    <a class="btn btn-primary" href="{% url 'stays:edit' stay.pk %}">Edit</a>
    <a class="btn" href="{% url 'stays:list' %}">Back</a>
  </div>
</div>
{% endblock %}
