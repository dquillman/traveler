{% include 'partials/nav.html' %}
<div style="position:sticky;top:0;background:#0f1220;border-bottom:1px solid #272b41;padding:10px 12px;z-index:9999">
  <a href="/stays/" style="margin-right:12px;color:#e8ebff;text-decoration:none">Stays</a>
  <a href="/stays/map/" style="margin-right:12px;color:#e8ebff;text-decoration:none">Map</a>
  <a href="/stays/charts/" style="margin-right:12px;color:#e8ebff;text-decoration:none">Charts</a>
  <a href="/stays/export/" style="margin-right:12px;color:#e8ebff;text-decoration:none">Export</a>
  <a href="/stays/import/" style="color:#e8ebff;text-decoration:none">Import</a>
</div>
<!doctype html><meta charset="utf-8"><title>Traveler â€¢ Charts</title>
<style>:root{--bg:#0f1220;--card:#161a2b;--ink:#e8ebff;--muted:#9aa4d2;--line:#272b41;--accent:#b9c6ff}
body{margin:0;background:var(--bg);color:var(--ink);font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Arial}
.wrap{max-width:1200px;margin:0 auto;padding:16px}.panel{background:var(--card);border:1px solid var(--line);border-radius:14px;box-shadow:0 8px 24px rgba(0,0,0,.25);padding:16px;min-height:520px}</style>
<div class="wrap"><div class="panel">
  <h1>Charts</h1>
  <canvas id="nightsByState" style="width:100%;height:420px;"></canvas>
</div></div>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
(async function(){
  const res = await fetch("{% url 'stays:stays_chart_data' %}");
  const data = await res.json();
  const ctx = document.getElementById('nightsByState').getContext('2d');
  new Chart(ctx,{type:'bar',data:{labels:data.labels,datasets:data.datasets},
    options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{display:true}},scales:{y:{beginAtZero:true}}}});
})();
</script>


